<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Leaf Network - Multi-AI Smart Farming Platform</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .app-container {
            min-height: 100vh;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: #2d5a27;
        }

        .nav-tabs {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: #374151;
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .nav-tab:hover, .nav-tab.active {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
        }

        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-icon {
            width: 2rem;
            height: 2rem;
            padding: 0.5rem;
            border-radius: 0.5rem;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-badge {
            font-size: 0.75rem;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-weight: 600;
        }

        .weather-card {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .weather-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1rem 0;
        }

        .temperature {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .weather-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .ai-chat {
            max-height: 350px;
            overflow-y: auto;
            border: 2px dashed #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }

        .chat-message {
            margin: 0.5rem 0;
            padding: 0.75rem;
            border-radius: 0.5rem;
            position: relative;
        }

        .user-message {
            background: #f3f4f6;
            margin-left: 2rem;
            text-align: right;
        }

        .ai-message {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            margin-right: 2rem;
        }

        .model-tag {
            position: absolute;
            top: -10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
        }

        .input-group {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .input-field {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 2px solid #e5e7eb;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .model-selector {
            display: flex;
            gap: 0.5rem;
            margin: 0.5rem 0;
            flex-wrap: wrap;
        }

        .model-option {
            padding: 0.25rem 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 1rem;
            background: white;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .model-option:hover, .model-option.active {
            border-color: #22c55e;
            background: #22c55e;
            color: white;
        }

        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: white;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(45deg, #22c55e, #16a34a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .product-info {
            padding: 1.25rem;
        }

        .price {
            font-size: 1.25rem;
            font-weight: bold;
            color: #16a34a;
        }

        .ai-prediction {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            padding: 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }

        .forum-post {
            background: white;
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin: 1rem 0;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        .alert {
            padding: 1rem;
            border-radius: 0.75rem;
            margin: 1rem 0;
            font-weight: 500;
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border-left: 4px solid #f59e0b;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .stat-card {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 0.75rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #16a34a;
        }

        .chart-container {
            position: relative;
            height: 320px;
            margin: 1rem 0;
        }

        .image-upload {
            border: 2px dashed #cbd5e1;
            border-radius: 0.75rem;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .image-upload:hover {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.05);
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .analysis-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 4px solid #22c55e;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            margin: 0.5rem 0;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e);
            transition: width 0.5s ease;
        }

        .api-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
        }

        .soil-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .soil-metric {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .soil-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #16a34a;
        }

        .crop-recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .crop-rec-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .crop-emoji {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const LeafNetwork = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [selectedModel, setSelectedModel] = useState('gpt-3.5-turbo');
            const [weatherData, setWeatherData] = useState({
                temperature: 28,
                condition: 'Sunny',
                humidity: 65,
                windSpeed: 12,
                rainfall: 0,
                uv: 7,
                prediction: 'Light rain expected tomorrow'
            });
            const [chatMessages, setChatMessages] = useState([
                { type: 'ai', text: 'Hello! I\'m your multi-AI farming assistant powered by various specialized models. How can I help you today?', model: 'OpenAI GPT-3.5' }
            ]);
            const [chatInput, setChatInput] = useState('');
            const [marketplaceItems, setMarketplaceItems] = useState([
                { id: 1, name: 'Fresh Tomatoes', price: '$3.50/kg', farmer: 'John Doe', location: 'Kerala', emoji: '🍅', prediction: '↗️ Price rising 12% this week' },
                { id: 2, name: 'Organic Rice', price: '$2.80/kg', farmer: 'Mary Smith', location: 'Punjab', emoji: '🌾', prediction: '📈 High demand expected' },
                { id: 3, name: 'Sweet Corn', price: '$4.20/kg', farmer: 'Raj Patel', location: 'Gujarat', emoji: '🌽', prediction: '💰 Premium pricing opportunity' },
                { id: 4, name: 'Fresh Spinach', price: '$1.90/kg', farmer: 'Priya Nair', location: 'Tamil Nadu', emoji: '🥬', prediction: '⚡ Quick sell recommended' }
            ]);
            const [diseaseImage, setDiseaseImage] = useState(null);
            const [diseaseAnalysis, setDiseaseAnalysis] = useState(null);
            const [soilData, setSoilData] = useState({
                ph: 6.8,
                nitrogen: 45,
                phosphorus: 23,
                potassium: 67,
                organic: 3.2,
                moisture: 78
            });
            const [cropRecommendations, setCropRecommendations] = useState([
                { crop: 'Tomatoes', emoji: '🍅', suitability: 92, reason: 'Optimal pH and nutrients' },
                { crop: 'Rice', emoji: '🌾', suitability: 88, reason: 'Good water retention' },
                { crop: 'Corn', emoji: '🌽', suitability: 85, reason: 'High potassium levels' }
            ]);
            const chartRef = useRef(null);

            const aiModels = {
                'gpt-3.5-turbo': { name: 'OpenAI GPT-3.5', specialty: 'General farming advice' },
                'plantnet': { name: 'PlantNet API', specialty: 'Plant identification' },
                'huggingface-bert': { name: 'HuggingFace BERT', specialty: 'Text analysis' },
                'weather-ai': { name: 'Weather AI', specialty: 'Climate prediction' },
                'crop-classifier': { name: 'Custom CNN', specialty: 'Disease detection' },
                'market-lstm': { name: 'Market LSTM', specialty: 'Price prediction' },
                'soil-analyzer': { name: 'Soil ML Model', specialty: 'Soil analysis' }
            };

            // Simulate real-time weather updates
            useEffect(() => {
                const interval = setInterval(() => {
                    setWeatherData(prev => ({
                        ...prev,
                        temperature: prev.temperature + (Math.random() - 0.5) * 2,
                        humidity: Math.max(30, Math.min(90, prev.humidity + (Math.random() - 0.5) * 10)),
                        windSpeed: Math.max(0, prev.windSpeed + (Math.random() - 0.5) * 5)
                    }));
                }, 30000);
                return () => clearInterval(interval);
            }, []);

            // Initialize yield chart
            useEffect(() => {
                if (chartRef.current && activeTab === 'dashboard') {
                    const ctx = chartRef.current.getContext('2d');
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                            datasets: [
                                {
                                    label: 'Actual Yield (tons)',
                                    data: [12, 19, 15, 25, 22, 28],
                                    borderColor: '#22c55e',
                                    backgroundColor: 'rgba(34, 197, 94, 0.1)',
                                    tension: 0.4,
                                    fill: true
                                },
                                {
                                    label: 'AI Predicted (tons)',
                                    data: [11, 18, 16, 24, 23, 29],
                                    borderColor: '#8b5cf6',
                                    backgroundColor: 'rgba(139, 92, 246, 0.1)',
                                    tension: 0.4,
                                    borderDash: [5, 5]
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            },
                            plugins: {
                                legend: {
                                    display: true
                                }
                            }
                        }
                    });
                }
            }, [activeTab]);

            const handleChatSubmit = async () => {
                if (!chatInput.trim()) return;
                
                const userMessage = { type: 'user', text: chatInput };
                setChatMessages(prev => [...prev, userMessage]);
                
                // Simulate different AI model responses based on query
                setTimeout(() => {
                    let response = '';
                    let model = '';
                    
                    if (chatInput.toLowerCase().includes('weather') || chatInput.toLowerCase().includes('rain')) {
                        response = `Based on satellite data and ML weather models, expect 15mm rainfall in next 48 hours. Recommend covering tomatoes and increasing drainage for rice fields.`;
                        model = 'Weather AI + Satellite Data';
                    } else if (chatInput.toLowerCase().includes('price') || chatInput.toLowerCase().includes('market')) {
                        response = `Market LSTM model predicts tomato prices will increase 12% this week due to supply shortage. Current wholesale rate: ₹45/kg. Suggest immediate harvest and sale.`;
                        model = 'Market LSTM + Price API';
                    } else if (chatInput.toLowerCase().includes('disease') || chatInput.toLowerCase().includes('pest')) {
                        response = `Based on PlantVillage dataset analysis, symptoms match early blight (87% confidence). Treatment: Copper fungicide spray every 7 days. Remove affected leaves immediately.`;
                        model = 'PlantVillage CNN + HuggingFace';
                    } else if (chatInput.toLowerCase().includes('soil') || chatInput.toLowerCase().includes('fertilizer')) {
                        response = `Soil analysis shows optimal pH (6.8) but low phosphorus (23ppm). Recommend DAP fertilizer @ 50kg/acre. NPK ratio should be 4:2:1 for your crop mix.`;
                        model = 'Soil ML + Chemistry API';
                    } else {
                        response = `I've analyzed your query using multiple AI models. For comprehensive farming guidance, I recommend checking weather patterns, soil conditions, and market trends together.`;
                        model = 'Multi-Model Ensemble';
                    }
                    
                    setChatMessages(prev => [...prev, { type: 'ai', text: response, model }]);
                }, 1500);
                
                setChatInput('');
            };

            const handleImageUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    setDiseaseImage(URL.createObjectURL(file));
                    
                    // Simulate multi-model disease detection
                    setTimeout(() => {
                        const analysisResult = {
                            disease: 'Late Blight',
                            confidence: 92,
                            severity: 'Moderate',
                            treatment: 'Apply copper-based fungicide immediately',
                            models: [
                                { name: 'PlantVillage CNN', confidence: 89 },
                                { name: 'Custom ResNet50', confidence: 94 },
                                { name: 'YOLOv8 Detection', confidence: 93 }
                            ]
                        };
                        setDiseaseAnalysis(analysisResult);
                        
                        setChatMessages(prev => [...prev, 
                            { type: 'user', text: 'Uploaded crop image for multi-model disease analysis' },
                            { type: 'ai', text: `Multi-model analysis complete: Detected ${analysisResult.disease} with ${analysisResult.confidence}% confidence. Severity: ${analysisResult.severity}. ${analysisResult.treatment}. Results verified across 3 specialized models.`, model: 'Multi-Model Disease Detection' }
                        ]);
                    }, 3000);
                }
            };

            const renderDashboard = () => (
                <div>
                    <div className="dashboard-grid">
                        {/* Enhanced Weather Card with AI Prediction */}
                        <div className="card weather-card">
                            <div className="card-header">
                                <div className="card-title">
                                    <div className="card-icon">🌤️</div>
                                    <h3>AI Weather Forecast</h3>
                                </div>
                                <div className="ai-badge">Weather AI</div>
                            </div>
                            <div className="weather-info">
                                <div className="temperature">{Math.round(weatherData.temperature)}°C</div>
                                <div>{weatherData.condition}</div>
                            </div>
                            <div className="weather-details">
                                <div>Humidity: {Math.round(weatherData.humidity)}%</div>
                                <div>Wind: {Math.round(weatherData.windSpeed)} km/h</div>
                                <div>Rainfall: {weatherData.rainfall}mm</div>
                                <div>UV Index: {weatherData.uv}</div>
                            </div>
                            <div style={{marginTop: '1rem', padding: '0.5rem', background: 'rgba(255,255,255,0.2)', borderRadius: '0.5rem'}}>
                                🤖 AI Prediction: {weatherData.prediction}
                            </div>
                            <div className="api-status">
                                <div className="status-dot"></div>
                                <span>OpenWeatherMap + Custom ML Model</span>
                            </div>
                        </div>

                        {/* Multi-AI Assistant */}
                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">
                                    <div className="card-icon">🧠</div>
                                    <h3>Multi-AI Assistant</h3>
                                </div>
                                <div className="ai-badge">7 Models</div>
                            </div>
                            
                            <div className="model-selector">
                                {Object.entries(aiModels).map(([key, model]) => (
                                    <div 
                                        key={key}
                                        className={`model-option ${selectedModel === key ? 'active' : ''}`}
                                        onClick={() => setSelectedModel(key)}
                                    >
                                        {model.name}
                                    </div>
                                ))}
                            </div>
                            
                            <div className="ai-chat">
                                {chatMessages.map((msg, idx) => (
                                    <div key={idx} className={`chat-message ${msg.type}-message`}>
                                        {msg.model && <div className="model-tag">{msg.model}</div>}
                                        {msg.text}
                                    </div>
                                ))}
                            </div>
                            <div className="input-group">
                                <input
                                    type="text"
                                    className="input-field"
                                    placeholder="Ask about weather, diseases, markets, soil..."
                                    value={chatInput}
                                    onChange={(e) => setChatInput(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleChatSubmit()}
                                />
                                <button className="btn btn-primary" onClick={handleChatSubmit}>Ask AI</button>
                            </div>
                        </div>

                        {/* Soil Analysis with ML */}
                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">
                                    <div className="card-icon">🌱</div>
                                    <h3>AI Soil Analysis</h3>
                                </div>
                                <div className="ai-badge">Soil ML</div>
                            </div>
                            <div className="soil-analysis">
                                <div className="soil-metric">
                                    <div className="soil-value">{soilData.ph}</div>
                                    <div>pH Level</div>
                                </div>
                                <div className="soil-metric">
                                    <div className="soil-value">{soilData.nitrogen}</div>
                                    <div>Nitrogen</div>
                                </div>
                                <div className="soil-metric">
                                    <div className="soil-value">{soilData.phosphorus}</div>
                                    <div>Phosphorus</div>
                                </div>
                                <div className="soil-metric">
                                    <div className="soil-value">{soilData.potassium}</div>
                                    <div>Potassium</div>
                                </div>
                            </div>
                            <div className="api-status">
                                <div className="status-dot"></div>
                                <span>IoT Sensors + Scikit-Learn Model</span>
                            </div>
                        </div>

                        {/* Enhanced Farm Stats */}
                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">
                                    <div className="card-icon">📊</div>
                                    <h3>AI-Powered Analytics</h3>
                                </div>
                                <div className="ai-badge">Analytics</div>
                            </div>
                            <div className="stats-grid">
                                <div className="stat-card">
                                    <div className="stat-number">42</div>
                                    <div>Active Crops</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-number">₹28K</div>
                                    <div>AI Predicted Revenue</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-number">94%</div>
                                    <div>Health Score</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-number">7</div>
                                    <div>AI Models Active</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* AI-Enhanced Alerts */}
                    <div className="alert alert-warning">
                        🤖 Weather AI Alert: Heavy rainfall (25mm) predicted in next 48h. ML models suggest covering sensitive crops. Confidence: 89%
                    </div>

                    <div className="alert alert-success">
                        💡 Market LSTM Insight: Tomato prices trending up 15% this week. Optimal selling window detected!
                    </div>

                    <div className="alert alert-info">
                        🔬 Soil AI Analysis: Nitrogen levels declining. Automated fertilizer recommendation generated.
                    </div>

                    {/* AI Crop Recommendations */}
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🌾</div>
                                <h3>AI Crop Recommendations</h3>
                            </div>
                            <div className="ai-badge">Recommendation Engine</div>
                        </div>
                        <div className="crop-recommendations">
                            {cropRecommendations.map((rec, idx) => (
                                <div key={idx} className="crop-rec-card">
                                    <div className="crop-emoji">{rec.emoji}</div>
                                    <h4>{rec.crop}</h4>
                                    <div style={{margin: '0.5rem 0'}}>
                                        <div className="confidence-bar">
                                            <div className="confidence-fill" style={{width: `${rec.suitability}%`}}></div>
                                        </div>
                                        <div>{rec.suitability}% Suitability</div>
                                    </div>
                                    <p style={{fontSize: '0.8rem', color: '#6b7280'}}>{rec.reason}</p>
                                </div>
                            ))}
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>Random Forest + Climate API + Soil Data</span>
                        </div>
                    </div>

                    {/* Enhanced Yield Chart */}
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">📈</div>
                                <h3>AI Yield Prediction vs Actual</h3>
                            </div>
                            <div className="ai-badge">LSTM + Prophet</div>
                        </div>
                        <div className="chart-container">
                            <canvas ref={chartRef}></canvas>
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>Facebook Prophet + Custom LSTM Model</span>
                        </div>
                    </div>
                </div>
            );

            const renderMarketplace = () => (
                <div>
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🛒</div>
                                <h3>AI-Powered Product Listing</h3>
                            </div>
                            <div className="ai-badge">Price Optimizer</div>
                        </div>
                        <div className="input-group">
                            <input type="text" className="input-field" placeholder="Product name (AI will suggest pricing)" />
                            <input type="text" className="input-field" placeholder="Quantity (kg)" />
                            <button className="btn btn-primary">Get AI Price Suggestion</button>
                        </div>
                        <div className="alert alert-info">
                            🤖 AI Pricing: Based on current market trends, similar tomatoes are selling at ₹45-52/kg. Recommended: ₹48/kg
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>Market API + Price Prediction ML</span>
                        </div>
                    </div>

                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🎯</div>
                                <h3>Smart Marketplace with AI Insights</h3>
                            </div>
                            <div className="ai-badge">Multi-Model</div>
                        </div>
                        <div className="marketplace-grid">
                            {marketplaceItems.map(item => (
                                <div key={item.id} className="product-card">
                                    <div className="product-image">{item.emoji}</div>
                                    <div className="product-info">
                                        <h4>{item.name}</h4>
                                        <div className="price">{item.price}</div>
                                        <p>By: {item.farmer}</p>
                                        <p>Location: {item.location}</p>
                                        <div className="ai-prediction">
                                            🤖 {item.prediction}
                                        </div>
                                        <button className="btn btn-primary" style={{width: '100%', marginTop: '0.75rem'}}>
                                            Smart Connect
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>LSTM Price Prediction + Market Sentiment Analysis</span>
                        </div>
                    </div>

                    {/* Market Trends with AI Analysis */}
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">📊</div>
                                <h3>AI Market Analysis</h3>
                            </div>
                            <div className="ai-badge">Trend Analysis</div>
                        </div>
                        <div className="analysis-grid">
                            <div className="analysis-card">
                                <h4>🍅 Tomatoes</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '78%'}}></div>
                                </div>
                                <p>Bullish trend - 78% confidence</p>
                                <small>High demand from urban markets</small>
                            </div>
                            <div className="analysis-card">
                                <h4>🌾 Rice</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '65%'}}></div>
                                </div>
                                <p>Stable - 65% confidence</p>
                                <small>Seasonal demand consistent</small>
                            </div>
                            <div className="analysis-card">
                                <h4>🌽 Corn</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '82%'}}></div>
                                </div>
                                <p>Strong growth - 82% confidence</p>
                                <small>Export opportunities rising</small>
                            </div>
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>News API + Sentiment Analysis + Price History ML</span>
                        </div>
                    </div>
                </div>
            );

            const renderCommunity = () => (
                <div>
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">💬</div>
                                <h3>AI-Enhanced Community Posts</h3>
                            </div>
                            <div className="ai-badge">NLP Analysis</div>
                        </div>
                        <div className="input-group">
                            <input type="text" className="input-field" placeholder="Post title (AI will categorize)" />
                            <button className="btn btn-primary">Create Smart Post</button>
                        </div>
                        <textarea 
                            className="input-field" 
                            rows="3" 
                            placeholder="AI will analyze your post for farming insights and automatically tag relevant farmers..."
                            style={{width: '100%', marginTop: '0.5rem'}}
                        ></textarea>
                        <div className="alert alert-info">
                            🤖 AI detected keywords: "pest control", "tomatoes", "organic". Auto-tagging relevant farmers in Kerala region.
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>HuggingFace BERT + spaCy NLP</span>
                        </div>
                    </div>

                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🌱</div>
                                <h3>Smart Community Feed</h3>
                            </div>
                            <div className="ai-badge">Content Ranking</div>
                        </div>
                        
                        <div className="forum-post">
                            <div className="post-header">
                                <span><strong>Farmer Kumar</strong> • 2 hours ago • 🤖 AI Relevance: 94%</span>
                            </div>
                            <h4>🍅 Organic pest control breakthrough results</h4>
                            <p>Sharing my neem oil + garlic spray results - 89% pest reduction in tomatoes. Cost effective and organic certified!</p>
                            <div className="ai-prediction">
                                🤖 AI Analysis: High value post. Similar methods show 85% success rate across 200+ farms.
                            </div>
                            <div style={{marginTop: '0.75rem'}}>
                                <button className="btn btn-secondary" style={{marginRight: '0.5rem'}}>👍 45 Likes</button>
                                <button className="btn btn-secondary">💬 12 Replies</button>
                                <button className="btn btn-primary" style={{marginLeft: '0.5rem'}}>🤖 Get AI Summary</button>
                            </div>
                        </div>

                        <div className="forum-post">
                            <div className="post-header">
                                <span><strong>AgriExpert Priya</strong> • 5 hours ago • 🤖 AI Relevance: 87%</span>
                            </div>
                            <h4>🌾 Monsoon preparation checklist + AI predictions</h4>
                            <p>Here's my AI-powered monsoon strategy that increased yield by 23% last year. Includes IoT sensor data and ML weather models.</p>
                            <div className="ai-prediction">
                                🤖 AI Analysis: Weather patterns match user's region. 91% applicability score.
                            </div>
                            <div style={{marginTop: '0.75rem'}}>
                                <button className="btn btn-secondary" style={{marginRight: '0.5rem'}}>👍 67 Likes</button>
                                <button className="btn btn-secondary">💬 23 Replies</button>
                                <button className="btn btn-primary" style={{marginLeft: '0.5rem'}}>🤖 Personalize for My Farm</button>
                            </div>
                        </div>

                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>Content Ranking ML + User Behavior Analysis</span>
                        </div>
                    </div>

                    {/* AI-Powered Expert Recommendations */}
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🎯</div>
                                <h3>AI Expert Matches</h3>
                            </div>
                            <div className="ai-badge">Recommendation</div>
                        </div>
                        <div className="analysis-grid">
                            <div className="analysis-card">
                                <h4>Dr. Rajesh Agro</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '96%'}}></div>
                                </div>
                                <p>96% match for your crops</p>
                                <small>Specializes in tomato diseases</small>
                            </div>
                            <div className="analysis-card">
                                <h4>Farmer Suresh</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '91%'}}></div>
                                </div>
                                <p>91% similarity to your farm</p>
                                <small>Same region, similar climate</small>
                            </div>
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>Collaborative Filtering + Geographic ML</span>
                        </div>
                    </div>
                </div>
            );

            const renderDiseaseDetection = () => (
                <div>
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🔬</div>
                                <h3>Multi-Model Disease Detection</h3>
                            </div>
                            <div className="ai-badge">3 CNN Models</div>
                        </div>
                        <div 
                            className="image-upload"
                            onClick={() => document.getElementById('imageInput').click()}
                        >
                            {diseaseImage ? (
                                <img src={diseaseImage} alt="Uploaded crop" style={{maxWidth: '100%', maxHeight: '250px', borderRadius: '0.5rem'}} />
                            ) : (
                                <div>
                                    <div style={{fontSize: '4rem', marginBottom: '1rem'}}>📸</div>
                                    <h3>AI-Powered Crop Analysis</h3>
                                    <p>Upload image for multi-model disease detection</p>
                                    <p style={{fontSize: '0.875rem', color: '#6b7280', marginTop: '0.5rem'}}>
                                        Supports: JPG, PNG, WebP • Max size: 10MB
                                    </p>
                                </div>
                            )}
                        </div>
                        <input
                            id="imageInput"
                            type="file"
                            accept="image/*"
                            onChange={handleImageUpload}
                            style={{display: 'none'}}
                        />
                        
                        {diseaseImage && (
                            <div style={{marginTop: '1rem'}}>
                                <button className="btn btn-primary">🧠 Analyze with 3 AI Models</button>
                                <button 
                                    className="btn btn-secondary" 
                                    style={{marginLeft: '0.5rem'}}
                                    onClick={() => {setDiseaseImage(null); setDiseaseAnalysis(null);}}
                                >
                                    🔄 Clear & Retry
                                </button>
                            </div>
                        )}
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>PlantVillage CNN + ResNet50 + YOLOv8</span>
                        </div>
                    </div>

                    {diseaseAnalysis && (
                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">
                                    <div className="card-icon">🎯</div>
                                    <h3>Multi-Model Analysis Results</h3>
                                </div>
                                <div className="ai-badge">Ensemble</div>
                            </div>
                            
                            <div className="analysis-grid">
                                <div className="analysis-card">
                                    <h4>🦠 {diseaseAnalysis.disease}</h4>
                                    <div className="confidence-bar">
                                        <div className="confidence-fill" style={{width: `${diseaseAnalysis.confidence}%`}}></div>
                                    </div>
                                    <p>{diseaseAnalysis.confidence}% Overall Confidence</p>
                                    <small>Severity: {diseaseAnalysis.severity}</small>
                                </div>
                                <div className="analysis-card">
                                    <h4>💊 Treatment Plan</h4>
                                    <p>{diseaseAnalysis.treatment}</p>
                                    <small>Immediate action required</small>
                                </div>
                            </div>

                            <h4 style={{margin: '1rem 0'}}>Individual Model Predictions:</h4>
                            <div className="analysis-grid">
                                {diseaseAnalysis.models.map((model, idx) => (
                                    <div key={idx} className="analysis-card">
                                        <h4>{model.name}</h4>
                                        <div className="confidence-bar">
                                            <div className="confidence-fill" style={{width: `${model.confidence}%`}}></div>
                                        </div>
                                        <p>{model.confidence}% confidence</p>
                                    </div>
                                ))}
                            </div>

                            <div className="alert alert-warning">
                                ⚠️ Consensus reached across all models. High confidence detection. Recommend immediate treatment to prevent spread.
                            </div>

                            <div className="api-status">
                                <div className="status-dot"></div>
                                <span>Ensemble method combining 3 specialized CNN models</span>
                            </div>
                        </div>
                    )}

                    {/* Disease Prevention AI */}
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🛡️</div>
                                <h3>AI Disease Prevention</h3>
                            </div>
                            <div className="ai-badge">Predictive ML</div>
                        </div>
                        <div className="analysis-grid">
                            <div className="analysis-card">
                                <h4>🦠 Blight Risk</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '73%'}}></div>
                                </div>
                                <p>High risk - 73%</p>
                                <small>Due to humidity + temperature</small>
                            </div>
                            <div className="analysis-card">
                                <h4>🐛 Pest Pressure</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '45%'}}></div>
                                </div>
                                <p>Moderate - 45%</p>
                                <small>Seasonal patterns normal</small>
                            </div>
                            <div className="analysis-card">
                                <h4>🍄 Fungal Risk</h4>
                                <div className="confidence-bar">
                                    <div className="confidence-fill" style={{width: '81%'}}></div>
                                </div>
                                <p>Very High - 81%</p>
                                <small>Monsoon + poor drainage</small>
                            </div>
                        </div>
                        <div className="alert alert-info">
                            🤖 AI Recommendation: Apply preventive fungicide spray in next 24 hours. Risk factors indicate 81% probability of fungal infection.
                        </div>
                        <div className="api-status">
                            <div className="status-dot"></div>
                            <span>Time Series ML + Environmental Sensors</span>
                        </div>
                    </div>
                </div>
            );

            const renderAIModels = () => (
                <div>
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🧠</div>
                                <h3>Active AI Models & APIs</h3>
                            </div>
                            <div className="ai-badge">Multi-Stack</div>
                        </div>
                        <div className="analysis-grid">
                            {Object.entries(aiModels).map(([key, model]) => (
                                <div key={key} className="analysis-card">
                                    <h4>{model.name}</h4>
                                    <div className="confidence-bar">
                                        <div className="confidence-fill" style={{width: `${Math.floor(Math.random() * 30) + 70}%`}}></div>
                                    </div>
                                    <p>Active & Running</p>
                                    <small>{model.specialty}</small>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">⚡</div>
                                <h3>Real-time Model Performance</h3>
                            </div>
                            <div className="ai-badge">Monitoring</div>
                        </div>
                        <div className="analysis-grid">
                            <div className="analysis-card">
                                <h4>🌤️ Weather Prediction</h4>
                                <div className="stat-number" style={{fontSize: '1.5rem'}}>94.2%</div>
                                <p>Accuracy (7-day forecast)</p>
                                <small>OpenWeatherMap + Custom LSTM</small>
                            </div>
                            <div className="analysis-card">
                                <h4>🦠 Disease Detection</h4>
                                <div className="stat-number" style={{fontSize: '1.5rem'}}>96.7%</div>
                                <p>Accuracy (validated dataset)</p>
                                <small>PlantVillage + ResNet ensemble</small>
                            </div>
                            <div className="analysis-card">
                                <h4>💰 Price Prediction</h4>
                                <div className="stat-number" style={{fontSize: '1.5rem'}}>87.3%</div>
                                <p>Accuracy (1-week ahead)</p>
                                <small>Market LSTM + Sentiment analysis</small>
                            </div>
                            <div className="analysis-card">
                                <h4>🌾 Yield Forecast</h4>
                                <div className="stat-number" style={{fontSize: '1.5rem'}}>91.8%</div>
                                <p>Accuracy (seasonal)</p>
                                <small>Facebook Prophet + Satellite data</small>
                            </div>
                        </div>
                    </div>

                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <div className="card-icon">🔧</div>
                                <h3>Model Integration Architecture</h3>
                            </div>
                        </div>
                        <div style={{background: '#f8fafc', padding: '1rem', borderRadius: '0.5rem', fontFamily: 'monospace', fontSize: '0.9rem'}}>
                            <div><strong>🌐 APIs & External Services:</strong></div>
                            <div>├── OpenWeatherMap API (Weather data)</div>
                            <div>├── NASA Satellite API (Crop monitoring)</div>
                            <div>├── Market Data API (Price feeds)</div>
                            <div>└── News API (Market sentiment)</div>
                            <br />
                            <div><strong>🤖 HuggingFace Models:</strong></div>
                            <div>├── BERT (Text classification & NLP)</div>
                            <div>├── ResNet50 (Image classification)</div>
                            <div>├── DistilBERT (Fast text processing)</div>
                            <div>└── CLIP (Image-text understanding)</div>
                            <br />
                            <div><strong>🧠 Custom ML Models:</strong></div>
                            <div>├── LSTM (Time series prediction)</div>
                            <div>├── Random Forest (Crop recommendations)</div>
                            <div>├── XGBoost (Yield prediction)</div>
                            <div>└── CNN Ensemble (Disease detection)</div>
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="app-container">
                    <nav className="navbar">
                        <div className="nav-content">
                            <div className="logo">
                                🍃 The Leaf Network
                                <span style={{fontSize: '0.8rem', marginLeft: '0.5rem', background: 'linear-gradient(135deg, #8b5cf6, #7c3aed)', color: 'white', padding: '0.2rem 0.5rem', borderRadius: '1rem'}}>
                                    Multi-AI
                                </span>
                            </div>
                            <div className="nav-tabs">
                                <button 
                                    className={`nav-tab ${activeTab === 'dashboard' ? 'active' : ''}`}
                                    onClick={() => setActiveTab('dashboard')}
                                >
                                    🏠 Dashboard
                                </button>
                                <button 
                                    className={`nav-tab ${activeTab === 'marketplace' ? 'active' : ''}`}
                                    onClick={() => setActiveTab('marketplace')}
                                >
                                    🛒 AI Marketplace
                                </button>
                                <button 
                                    className={`nav-tab ${activeTab === 'community' ? 'active' : ''}`}
                                    onClick={() => setActiveTab('community')}
                                >
                                    👥 Smart Community
                                </button>
                                <button 
                                    className={`nav-tab ${activeTab === 'disease' ? 'active' : ''}`}
                                    onClick={() => setActiveTab('disease')}
                                >
                                    🔬 Disease AI
                                </button>
                                <button 
                                    className={`nav-tab ${activeTab === 'models' ? 'active' : ''}`}
                                    onClick={() => setActiveTab('models')}
                                >
                                    🧠 AI Models
                                </button>
                            </div>
                        </div>
                    </nav>

                    <main className="main-content">
                        {activeTab === 'dashboard' && renderDashboard()}
                        {activeTab === 'marketplace' && renderMarketplace()}
                        {activeTab === 'community' && renderCommunity()}
                        {activeTab === 'disease' && renderDiseaseDetection()}
                        {activeTab === 'models' && renderAIModels()}
                    </main>
                </div>
            );
        };

        ReactDOM.render(<LeafNetwork />, document.getElementById('root'));
    </script>
</body>
</html>